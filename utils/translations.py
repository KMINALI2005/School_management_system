"""
نظام الترجمة متعدد اللغات
يدعم العربية والإنجليزية
"""

translations = {
    'ar': {
        # العامة
        'success': 'نجح',
        'error': 'خطأ',
        'warning': 'تحذير',
        'info': 'معلومات',
        'save': 'حفظ',
        'cancel': 'إلغاء',
        'delete': 'حذف',
        'edit': 'تعديل',
        'add': 'إضافة',
        'close': 'إغلاق',
        'yes': 'نعم',
        'no': 'لا',
        'ok': 'موافق',
        'search': 'بحث',
        'refresh': 'تحديث',
        'export': 'تصدير',
        'import': 'استيراد',
        'print': 'طباعة',
        'today': 'اليوم',
        'date': 'التاريخ',
        'time': 'الوقت',
        'name': 'الاسم',
        'notes': 'ملاحظات',
        'status': 'الحالة',
        'active': 'نشط',
        'inactive': 'غير نشط',
        'from': 'من',
        'to': 'إلى',
        'update': 'تحديث',
        'select': 'اختيار',
        'all': 'الكل',
        'none': 'بلا',
        'total': 'المجموع',
        'statistics': 'إحصائيات',
        
        # المستخدمون
        'username': 'اسم المستخدم',
        'password': 'كلمة المرور',
        'email': 'البريد الإلكتروني',
        'phone': 'رقم الهاتف',
        'address': 'العنوان',
        'user_type': 'نوع المستخدم',
        'admin': 'مدير',
        'teacher': 'معلم',
        'student': 'طالب',
        'login': 'تسجيل الدخول',
        'logout': 'تسجيل الخروج',
        'profile': 'الملف الشخصي',
        
        # الطلاب
        'students': 'الطلاب',
        'student_management': 'إدارة الطلاب',
        'student_name': 'اسم الطالب',
        'student_id': 'رقم الطالب',
        'full_name': 'الاسم الكامل',
        'birth_date': 'تاريخ الميلاد',
        'parent_name': 'اسم ولي الأمر',
        'parent_phone': 'هاتف ولي الأمر',
        'enrollment_date': 'تاريخ التسجيل',
        'add_student': 'إضافة طالب',
        'edit_student': 'تعديل الطالب',
        'delete_student': 'حذف الطالب',
        'student_added': 'تم إضافة الطالب بنجاح',
        'student_updated': 'تم تحديث الطالب بنجاح',
        'student_deleted': 'تم حذف الطالب بنجاح',
        'confirm_delete_student': 'هل أنت متأكد من حذف هذا الطالب؟',
        
        # المعلمون
        'teachers': 'المعلمون',
        'teacher_management': 'إدارة المعلمين',
        'teacher_name': 'اسم المعلم',
        'teacher_id': 'رقم المعلم',
        'specialization': 'التخصص',
        'qualification': 'المؤهل',
        'hire_date': 'تاريخ التوظيف',
        'salary': 'الراتب',
        'add_teacher': 'إضافة معلم',
        'edit_teacher': 'تعديل المعلم',
        'delete_teacher': 'حذف المعلم',
        'teacher_added': 'تم إضافة المعلم بنجاح',
        'teacher_updated': 'تم تحديث المعلم بنجاح',
        'teacher_deleted': 'تم حذف المعلم بنجاح',
        'confirm_delete_teacher': 'هل أنت متأكد من حذف هذا المعلم؟',
        
        # الصفوف
        'classes': 'الصفوف',
        'class_management': 'إدارة الصفوف',
        'class': 'الصف',
        'class_name': 'اسم الصف',
        'section': 'الشعبة',
        'class_teacher': 'معلم الصف',
        'capacity': 'السعة',
        'current_students': 'عدد الطلاب الحالي',
        'add_class': 'إضافة صف',
        'edit_class': 'تعديل الصف',
        'delete_class': 'حذف الصف',
        'class_added': 'تم إضافة الصف بنجاح',
        'class_updated': 'تم تحديث الصف بنجاح',
        'class_deleted': 'تم حذف الصف بنجاح',
        'confirm_delete_class': 'هل أنت متأكد من حذف هذا الصف؟',
        'select_class': 'اختر الصف',
        'select_class_first': 'الرجاء اختيار الصف أولاً',
        
        # المواد
        'subjects': 'المواد',
        'subject_management': 'إدارة المواد',
        'subject': 'المادة',
        'subject_name': 'اسم المادة',
        'subject_code': 'رمز المادة',
        'subject_teacher': 'معلم المادة',
        'credit_hours': 'عدد الساعات',
        'add_subject': 'إضافة مادة',
        'edit_subject': 'تعديل المادة',
        'delete_subject': 'حذف المادة',
        'subject_added': 'تم إضافة المادة بنجاح',
        'subject_updated': 'تم تحديث المادة بنجاح',
        'subject_deleted': 'تم حذف المادة بنجاح',
        'confirm_delete_subject': 'هل أنت متأكد من حذف هذه المادة؟',
        'all_subjects': 'جميع المواد',
        
        # الدرجات
        'grades': 'الدرجات',
        'grades_management': 'إدارة الدرجات',
        'grade': 'الدرجة',
        'total_grade': 'الدرجة الكلية',
        'grade_type': 'نوع الدرجة',
        'exam_type': 'نوع الامتحان',
        'midterm': 'منتصف الفصل',
        'final': 'نهائي',
        'homework': 'واجب منزلي',
        'quiz': 'اختبار قصير',
        'participation': 'مشاركة',
        'grade_value': 'قيمة الدرجة',
        'max_grade': 'الدرجة العظمى',
        'grade_date': 'تاريخ الدرجة',
        'add_grade': 'إضافة درجة',
        'edit_grade': 'تعديل الدرجة',
        'delete_grade': 'حذف الدرجة',
        'grade_added': 'تم إضافة الدرجة بنجاح',
        'grade_updated': 'تم تحديث الدرجة بنجاح',
        'grade_deleted': 'تم حذف الدرجة بنجاح',
        'grades_report': 'تقرير الدرجات',
        'semester': 'الفصل الدراسي',
        'academic_year': 'العام الدراسي',
        
        # الحضور
        'attendance': 'الحضور',
        'attendance_management': 'إدارة الحضور',
        'present': 'حاضر',
        'absent': 'غائب',
        'late': 'متأخر',
        'excused': 'معذور',
        'arrival_time': 'وقت الحضور',
        'record_attendance': 'تسجيل الحضور',
        'attendance_report': 'تقرير الحضور',
        'attendance_statistics': 'إحصائيات الحضور',
        'attendance_saved_success': 'تم حفظ الحضور بنجاح',
        'attendance_rate': 'نسبة الحضور: {rate} - متأخرين: {late} - معذورين: {excused}',
        'attendance_info': 'المجموع: {total} - حاضرين: {present} - غائبين: {absent}',
        'present_days': 'أيام الحضور',
        'absent_days': 'أيام الغياب',
        'late_days': 'أيام التأخير',
        'excused_days': 'أيام الإعذار',
        'total_days': 'إجمالي الأيام',
        'total_school_days': 'إجمالي أيام الدراسة',
        'total_present': 'إجمالي الحضور',
        'total_absent': 'إجمالي الغياب',
        'total_late': 'إجمالي التأخير',
        'total_excused': 'إجمالي المعذور',
        'student_statistics': 'إحصائيات الطلاب',
        
        # الجدول الدراسي
        'timetable': 'الجدول الدراسي',
        'timetable_management': 'إدارة الجدول الدراسي',
        'period': 'الحصة',
        'day': 'اليوم',
        'start_time': 'وقت البداية',
        'end_time': 'وقت النهاية',
        'room': 'القاعة',
        'sunday': 'الأحد',
        'monday': 'الاثنين',
        'tuesday': 'الثلاثاء',
        'wednesday': 'الأربعاء',
        'thursday': 'الخميس',
        'friday': 'الجمعة',
        'saturday': 'السبت',
        'add_period': 'إضافة حصة',
        'edit_period': 'تعديل الحصة',
        'delete_period': 'حذف الحصة',
        'period_added': 'تم إضافة الحصة بنجاح',
        'period_updated': 'تم تحديث الحصة بنجاح',
        'period_deleted': 'تم حذف الحصة بنجاح',
        'timetable_conflict': 'يوجد تعارض في الجدول الدراسي',
        
        # التقارير
        'reports': 'التقارير',
        'reports_management': 'إدارة التقارير',
        'generate_report': 'إنشاء تقرير',
        'report_type': 'نوع التقرير',
        'student_report': 'تقرير الطلاب',
        'teacher_report': 'تقرير المعلمين',
        'class_report': 'تقرير الصفوف',
        'attendance_report': 'تقرير الحضور',
        'grades_report': 'تقرير الدرجات',
        'financial_report': 'التقرير المالي',
        'custom_report': 'تقرير مخصص',
        'report_generated': 'تم إنشاء التقرير بنجاح',
        'print_report': 'طباعة التقرير',
        'export_excel': 'تصدير إلى Excel',
        'export_pdf': 'تصدير إلى PDF',
        
        # الإشعارات
        'notifications': 'الإشعارات',
        'notification': 'إشعار',
        'send_notification': 'إرسال إشعار',
        'notification_title': 'عنوان الإشعار',
        'notification_message': 'رسالة الإشعار',
        'notification_type': 'نوع الإشعار',
        'general': 'عام',
        'urgent': 'عاجل',
        'reminder': 'تذكير',
        'announcement': 'إعلان',
        'recipients': 'المستقبلون',
        'all_teachers': 'جميع المعلمين',
        'all_students': 'جميع الطلاب',
        'specific_class': 'صف محدد',
        'notification_sent': 'تم إرسال الإشعار بنجاح',
        'mark_as_read': 'تحديد كمقروء',
        'unread_notifications': 'إشعارات غير مقروءة',
        
        # الإعدادات
        'settings': 'الإعدادات',
        'general_settings': 'الإعدادات العامة',
        'school_name': 'اسم المدرسة',
        'school_address': 'عنوان المدرسة',
        'school_phone': 'هاتف المدرسة',
        'school_email': 'بريد المدرسة',
        'current_year': 'العام الحالي',
        'current_semester': 'الفصل الحالي',
        'first_semester': 'الفصل الأول',
        'second_semester': 'الفصل الثاني',
        'language': 'اللغة',
        'arabic': 'العربية',
        'english': 'الإنجليزية',
        'theme': 'المظهر',
        'light_theme': 'فاتح',
        'dark_theme': 'داكن',
        'backup_settings': 'إعدادات النسخ الاحتياطي',
        'auto_backup': 'نسخ احتياطي تلقائي',
        'backup_interval': 'فترة النسخ الاحتياطي',
        'backup_location': 'مكان النسخ الاحتياطي',
        'create_backup': 'إنشاء نسخة احتياطية',
        'restore_backup': 'استعادة نسخة احتياطية',
        'settings_saved': 'تم حفظ الإعدادات بنجاح',
        
        # الأخطاء والرسائل
        'required_field': 'هذا الحقل مطلوب',
        'invalid_email': 'بريد إلكتروني غير صحيح',
        'invalid_phone': 'رقم هاتف غير صحيح',
        'invalid_date': 'تاريخ غير صحيح',
        'duplicate_entry': 'البيانات موجودة مسبقاً',
        'operation_failed': 'فشلت العملية',
        'no_data_found': 'لا توجد بيانات',
        'loading': 'جاري التحميل...',
        'please_wait': 'الرجاء الانتظار...',
        'confirm_action': 'تأكيد العملية',
        'cannot_delete': 'لا يمكن الحذف',
        'data_saved': 'تم حفظ البيانات بنجاح',
        'invalid_credentials': 'اسم المستخدم أو كلمة المرور غير صحيحة',
        'access_denied': 'ليس لديك صلاحية للوصول',
        'session_expired': 'انتهت صلاحية الجلسة',
        
        # النسخ الاحتياطي
        'backup': 'نسخة احتياطية',
        'backup_created': 'تم إنشاء النسخة الاحتياطية بنجاح',
        'backup_restored': 'تم استعادة النسخة الاحتياطية بنجاح',
        'backup_failed': 'فشل في إنشاء النسخة الاحتياطية',
        'restore_failed': 'فشل في استعادة النسخة الاحتياطية',
        'select_backup_file': 'اختر ملف النسخة الاحتياطية',
        'backup_warning': 'تحذير: ستحل النسخة الاحتياطية محل البيانات الحالية',
        
        # AI المساعد
        'ai_assistant': 'المساعد الذكي',
        'ask_question': 'اطرح سؤالاً',
        'ai_response': 'استجابة المساعد',
        'ai_analyzing': 'المساعد يحلل البيانات...',
        'ai_suggestions': 'اقتراحات المساعد',
        'performance_analysis': 'تحليل الأداء',
        'student_performance': 'أداء الطلاب',
        'class_performance': 'أداء الصف',
        'attendance_analysis': 'تحليل الحضور',
        'grade_analysis': 'تحليل الدرجات',
        'recommendations': 'توصيات',
        'ai_unavailable': 'المساعد الذكي غير متاح حالياً'
    },
    'en': {
        # General
        'success': 'Success',
        'error': 'Error',
        'warning': 'Warning',
        'info': 'Information',
        'save': 'Save',
        'cancel': 'Cancel',
        'delete': 'Delete',
        'edit': 'Edit',
        'add': 'Add',
        'close': 'Close',
        'yes': 'Yes',
        'no': 'No',
        'ok': 'OK',
        'search': 'Search',
        'refresh': 'Refresh',
        'export': 'Export',
        'import': 'Import',
        'print': 'Print',
        'today': 'Today',
        'date': 'Date',
        'time': 'Time',
        'name': 'Name',
        'notes': 'Notes',
        'status': 'Status',
        'active': 'Active',
        'inactive': 'Inactive',
        'from': 'From',
        'to': 'To',
        'update': 'Update',
        'select': 'Select',
        'all': 'All',
        'none': 'None',
        'total': 'Total',
        'statistics': 'Statistics',
        
        # Users
        'username': 'Username',
        'password': 'Password',
        'email': 'Email',
        'phone': 'Phone',
        'address': 'Address',
        'user_type': 'User Type',
        'admin': 'Admin',
        'teacher': 'Teacher',
        'student': 'Student',
        'login': 'Login',
        'logout': 'Logout',
        'profile': 'Profile',
        
        # Students
        'students': 'Students',
        'student_management': 'Student Management',
        'student_name': 'Student Name',
        'student_id': 'Student ID',
        'full_name': 'Full Name',
        'birth_date': 'Birth Date',
        'parent_name': 'Parent Name',
        'parent_phone': 'Parent Phone',
        'enrollment_date': 'Enrollment Date',
        'add_student': 'Add Student',
        'edit_student': 'Edit Student',
        'delete_student': 'Delete Student',
        'student_added': 'Student added successfully',
        'student_updated': 'Student updated successfully',
        'student_deleted': 'Student deleted successfully',
        'confirm_delete_student': 'Are you sure you want to delete this student?',
        
        # Teachers
        'teachers': 'Teachers',
        'teacher_management': 'Teacher Management',
        'teacher_name': 'Teacher Name',
        'teacher_id': 'Teacher ID',
        'specialization': 'Specialization',
        'qualification': 'Qualification',
        'hire_date': 'Hire Date',
        'salary': 'Salary',
        'add_teacher': 'Add Teacher',
        'edit_teacher': 'Edit Teacher',
        'delete_teacher': 'Delete Teacher',
        'teacher_added': 'Teacher added successfully',
        'teacher_updated': 'Teacher updated successfully',
        'teacher_deleted': 'Teacher deleted successfully',
        'confirm_delete_teacher': 'Are you sure you want to delete this teacher?',
        
        # Classes
        'classes': 'Classes',
        'class_management': 'Class Management',
        'class': 'Class',
        'class_name': 'Class Name',
        'section': 'Section',
        'class_teacher': 'Class Teacher',
        'capacity': 'Capacity',
        'current_students': 'Current Students',
        'add_class': 'Add Class',
        'edit_class': 'Edit Class',
        'delete_class': 'Delete Class',
        'class_added': 'Class added successfully',
        'class_updated': 'Class updated successfully',
        'class_deleted': 'Class deleted successfully',
        'confirm_delete_class': 'Are you sure you want to delete this class?',
        'select_class': 'Select Class',
        'select_class_first': 'Please select a class first',
        
        # Subjects
        'subjects': 'Subjects',
        'subject_management': 'Subject Management',
        'subject': 'Subject',
        'subject_name': 'Subject Name',
        'subject_code': 'Subject Code',
        'subject_teacher': 'Subject Teacher',
        'credit_hours': 'Credit Hours',
        'add_subject': 'Add Subject',
        'edit_subject': 'Edit Subject',
        'delete_subject': 'Delete Subject',
        'subject_added': 'Subject added successfully',
        'subject_updated': 'Subject updated successfully',
        'subject_deleted': 'Subject deleted successfully',
        'confirm_delete_subject': 'Are you sure you want to delete this subject?',
        'all_subjects': 'All Subjects',
        
        # Grades
        'grades': 'Grades',
        'grades_management': 'Grades Management',
        'grade': 'Grade',
        'total_grade': 'Total Grade',
        'grade_type': 'Grade Type',
        'exam_type': 'Exam Type',
        'midterm': 'Midterm',
        'final': 'Final',
        'homework': 'Homework',
        'quiz': 'Quiz',
        'participation': 'Participation',
        'grade_value': 'Grade Value',
        'max_grade': 'Max Grade',
        'grade_date': 'Grade Date',
        'add_grade': 'Add Grade',
        'edit_grade': 'Edit Grade',
        'delete_grade': 'Delete Grade',
        'grade_added': 'Grade added successfully',
        'grade_updated': 'Grade updated successfully',
        'grade_deleted': 'Grade deleted successfully',
        'grades_report': 'Grades Report',
        'semester': 'Semester',
        'academic_year': 'Academic Year',
        
        # Attendance
        'attendance': 'Attendance',
        'attendance_management': 'Attendance Management',
        'present': 'Present',
        'absent': 'Absent',
        'late': 'Late',
        'excused': 'Excused',
        'arrival_time': 'Arrival Time',
        'record_attendance': 'Record Attendance',
        'attendance_report': 'Attendance Report',
        'attendance_statistics': 'Attendance Statistics',
        'attendance_saved_success': 'Attendance saved successfully',
        'attendance_rate': 'Attendance Rate: {rate} - Late: {late} - Excused: {excused}',
        'attendance_info': 'Total: {total} - Present: {present} - Absent: {absent}',
        'present_days': 'Present Days',
        'absent_days': 'Absent Days',
        'late_days': 'Late Days',
        'excused_days': 'Excused Days',
        'total_days': 'Total Days',
        'total_school_days': 'Total School Days',
        'total_present': 'Total Present',
        'total_absent': 'Total Absent',
        'total_late': 'Total Late',
        'total_excused': 'Total Excused',
        'student_statistics': 'Student Statistics',
        
        # Timetable
        'timetable': 'Timetable',
        'timetable_management': 'Timetable Management',
        'period': 'Period',
        'day': 'Day',
        'start_time': 'Start Time',
        'end_time': 'End Time',
        'room': 'Room',
        'sunday': 'Sunday',
        'monday': 'Monday',
        'tuesday': 'Tuesday',
        'wednesday': 'Wednesday',
        'thursday': 'Thursday',
        'friday': 'Friday',
        'saturday': 'Saturday',
        'add_period': 'Add Period',
        'edit_period': 'Edit Period',
        'delete_period': 'Delete Period',
        'period_added': 'Period added successfully',
        'period_updated': 'Period updated successfully',
        'period_deleted': 'Period deleted successfully',
        'timetable_conflict': 'Timetable conflict detected',
        
        # Reports
        'reports': 'Reports',
        'reports_management': 'Reports Management',
        'generate_report': 'Generate Report',
        'report_type': 'Report Type',
        'student_report': 'Student Report',
        'teacher_report': 'Teacher Report',
        'class_report': 'Class Report',
        'attendance_report': 'Attendance Report',
        'grades_report': 'Grades Report',
        'financial_report': 'Financial Report',
        'custom_report': 'Custom Report',
        'report_generated': 'Report generated successfully',
        'print_report': 'Print Report',
        'export_excel': 'Export to Excel',
        'export_pdf': 'Export to PDF',
        
        # Notifications
        'notifications': 'Notifications',
        'notification': 'Notification',
        'send_notification': 'Send Notification',
        'notification_title': 'Notification Title',
        'notification_message': 'Notification Message',
        'notification_type': 'Notification Type',
        'general': 'General',
        'urgent': 'Urgent',
        'reminder': 'Reminder',
        'announcement': 'Announcement',
        'recipients': 'Recipients',
        'all_teachers': 'All Teachers',
        'all_students': 'All Students',
        'specific_class': 'Specific Class',
        'notification_sent': 'Notification sent successfully',
        'mark_as_read': 'Mark as Read',
        'unread_notifications': 'Unread Notifications',
        
        # Settings
        'settings': 'Settings',
        'general_settings': 'General Settings',
        'school_name': 'School Name',
        'school_address': 'School Address',
        'school_phone': 'School Phone',
        'school_email': 'School Email',
        'current_year': 'Current Year',
        'current_semester': 'Current Semester',
        'first_semester': 'First Semester',
        'second_semester': 'Second Semester',
        'language': 'Language',
        'arabic': 'Arabic',
        'english': 'English',
        'theme': 'Theme',
        'light_theme': 'Light',
        'dark_theme': 'Dark',
        'backup_settings': 'Backup Settings',
        'auto_backup': 'Auto Backup',
        'backup_interval': 'Backup Interval',
        'backup_location': 'Backup Location',
        'create_backup': 'Create Backup',
        'restore_backup': 'Restore Backup',
        'settings_saved': 'Settings saved successfully',
        
        # Errors and Messages
        'required_field': 'This field is required',
        'invalid_email': 'Invalid email address',
        'invalid_phone': 'Invalid phone number',
        'invalid_date': 'Invalid date',
        'duplicate_entry': 'Duplicate entry',
        'operation_failed': 'Operation failed',
        'no_data_found': 'No data found',
        'loading': 'Loading...',
        'please_wait': 'Please wait...',
        'confirm_action': 'Confirm Action',
        'cannot_delete': 'Cannot delete',
        'data_saved': 'Data saved successfully',
        'invalid_credentials': 'Invalid username or password',
        'access_denied': 'Access denied',
        'session_expired': 'Session expired',
        
        # Backup
        'backup': 'Backup',
        'backup_created': 'Backup created successfully',
        'backup_restored': 'Backup restored successfully',
        'backup_failed': 'Backup creation failed',
        'restore_failed': 'Backup restoration failed',
        'select_backup_file': 'Select backup file',
        'backup_warning': 'Warning: This will replace current data with backup data',
        
        # AI Assistant
        'ai_assistant': 'AI Assistant',
        'ask_question': 'Ask a Question',
        'ai_response': 'AI Response',
        'ai_analyzing': 'AI is analyzing data...',
        'ai_suggestions': 'AI Suggestions',
        'performance_analysis': 'Performance Analysis',
        'student_performance': 'Student Performance',
        'class_performance': 'Class Performance',
        'attendance_analysis': 'Attendance Analysis',
        'grade_analysis': 'Grade Analysis',
        'recommendations': 'Recommendations',
        'ai_unavailable': 'AI Assistant is currently unavailable'
    }
}

def tr(key, language='ar'):
    """
    ترجمة النص المطلوب
    
    Args:
        key (str): مفتاح الترجمة
        language (str): اللغة المطلوبة ('ar' أو 'en')
    
    Returns:
        str: النص المترجم أو المفتاح إذا لم توجد الترجمة
    """
    if language in translations and key in translations[language]:
        return translations[language][key]
    
    # إذا لم توجد الترجمة، جرب الإنجليزية كبديل
    if language != 'en' and 'en' in translations and key in translations['en']:
        return translations['en'][key]
    
    # إذا لم توجد ترجمة، أرجع المفتاح
    return key

def get_available_languages():
    """
    إرجاع قائمة باللغات المتاحة
    
    Returns:
        list: قائمة باللغات المتاحة
    """
    return list(translations.keys())

def is_rtl(language):
    """
    تحديد ما إذا كانت اللغة تكتب من اليمين إلى اليسار
    
    Args:
        language (str): رمز اللغة
    
    Returns:
        bool: True إذا كانت اللغة تكتب من اليمين إلى اليسار
    """
    rtl_languages = ['ar', 'he', 'fa', 'ur']
    return language in rtl_languages
